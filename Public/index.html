<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Minder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="key.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onload="initPage()">
<div id="topBanner">
    <h1 id="appName">Minder</h1>
</div>

<div id="showFeed">
    <h2>Shows Near You</h2>
    <div id="showList"></div>
</div>
</body>

<script type="text/javascript">
    function initPage() {
        if(apiKey == undefined) {
            alert("You dont have the API Key, Talk to Josh to get it");
        }
        //Collect client info
        $.getJSON("http://jsonip.com?callback=?", function (data) {
            getConcerts(data.ip);
        });
    }

    //function for collecting
    function getConcerts(ip) {
        $.getJSON("http://api.songkick.com/api/3.0/events.json?apikey=" + apiKey + "&location=ip:" + ip,
            function(data){
                console.log(data);
                populateShows(data);
            });
    }

    function populateShows(data) {
        var events = data.resultsPage.results.event;
        //Collect container
        var list = $("#showList");
        //Loop through events and display them
        for(var i = 0; i < events.length; i++) {
            list.append("<h3>");
            list.append(events[i].displayName);
            list.append("</h3>");

        }
    }
</script>
</html>
